<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Tour 360 - VR Completo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- Swiper para carrusel -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <style>
      body {
        margin: 0;
        overflow: hidden;
      }

      .logo-card {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.5);
        color: white;
        padding: 10px 20px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 10;
      }

      .logo-card img {
        width: 40px;
        height: 40px;
      }

      /* Carrusel */
      .swiper {
        width: 300px;
        height: 200px;
        background: rgba(0, 0, 0, 0.85);
        border-radius: 10px;
      }

      .swiper-slide {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .swiper-slide img {
        width: 100%;
        border-radius: 8px;
      }

      #closeCarousel {
        position: absolute;
        top: 5px;
        right: 10px;
        background: red;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
      }

      #videoContainer {
        position: absolute;
        right: 10px;
        bottom: 10px;
        width: 320px;
        height: 180px;
        z-index: 10;
        border-radius: 10px;
        overflow: hidden;
      }

      #videoContainer video {
        width: 100%;
        height: 100%;
      }

      /* Menú de escenas */
      #sceneMenu {
        position: absolute;
        top: 50%;
        left: 10px;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 10px;
        border-radius: 10px;
        z-index: 10;
      }

      #sceneMenu button {
        display: block;
        width: 100%;
        margin: 5px 0;
        background: #0066cc;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px;
        cursor: pointer;
      }

      #sceneMenu button:hover {
        background: #0099ff;
      }
    </style>
  </head>

  <body>
    <!-- Tarjeta de logo -->
    <div class="logo-card">
      <img src="img/logo.png" alt="Logo" />
      <span>The Medellin Adventure</span>
    </div>

    <!-- Menú lateral de escenas -->
    <div id="sceneMenu">
      <button onclick="changeScene('img/plaza_botero_360.jpg')">Plaza Botero</button>
      <button onclick="changeScene('img/pueblito_paisa_360.jpg')">Pueblito Paisa</button>
      <button onclick="changeScene('img/metro_360.jpg')">Metro de Medellín</button>
    </div>

    <!-- Carrusel -->
    <div
      id="carouselContainer"
      style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:20;"
    >
      <button id="closeCarousel">X</button>
      <div class="swiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="img/botero1.jpg" /><p>Escultura 1</p></div>
          <div class="swiper-slide"><img src="img/botero2.jpg" /><p>Escultura 2</p></div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>

    <!-- Video lateral -->
    <div id="videoContainer">
      <video id="infoVideo" src="video1.mp4" autoplay muted loop></video>
    </div>

    <!-- Escena A-Frame -->
    <a-scene vr-mode-ui="enabled: true" embedded>
      <!-- Cámara con cursor -->
      <a-entity id="rig" position="0 1.6 0">
        <a-camera>
          <a-cursor color="#00FFAA" fuse="true" fuse-timeout="1000"></a-cursor>
        </a-camera>
      </a-entity>

      <!-- Fondo esférico -->
      <a-sky id="sky" src="img/plaza_botero_360.jpg" rotation="0 -90 0"></a-sky>

      <!-- Hotspot tipo cámara -->
      <a-image
        id="hotspot-camera"
        src="img/Camara.png"
        position="2 1.5 -3"
        scale="0.5 0.5 0.5"
        class="clickable"
      ></a-image>

      <!-- Luz ambiental -->
      <a-entity light="type: ambient; color: #888"></a-entity>
    </a-scene>

    <script>
      // --- Cambio de escena ---
      function changeScene(imageSrc) {
        document.getElementById("sky").setAttribute("src", imageSrc);
      }

      // --- Hotspot de carrusel ---
      const hotspot = document.getElementById("hotspot-camera");
      const carouselContainer = document.getElementById("carouselContainer");
      const closeCarousel = document.getElementById("closeCarousel");

      hotspot.addEventListener("click", () => {
        carouselContainer.style.display = "block";
        new Swiper(".swiper", {
          loop: true,
          pagination: { el: ".swiper-pagination" },
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
        });
      });

      closeCarousel.addEventListener("click", () => {
        carouselContainer.style.display = "none";
      });

      // --- Punteros activos en VR ---
      const scene = document.querySelector("a-scene");
      scene.addEventListener("enter-vr", () => {
        console.log("Entrando a modo VR...");
        document.querySelector("a-cursor").setAttribute("visible", "true");
      });
    </script>
  </body>
</html>
