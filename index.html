<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Guatap√© Travel - VR</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <link rel="stylesheet" href="style.css">
  <script type="module" src="index.js" defer></script>

  <style>
    body {
      margin: 0;
      background-color: black;
    }

    /* üîπ Forzar bot√≥n VR visible */
    a-enter-vr-button {
      display: block !important;
      position: fixed !important;
      bottom: 20px !important;
      right: 20px !important;
      z-index: 9999 !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    a-enter-ar-button {
      display: none !important;
    }

    /* üîπ Estilos extra del men√∫ VR */
    .scene-button {
      background: #0a1e2b;
      color: #ffcc00;
      border: 2px solid #ffcc00;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .scene-button:hover {
      background: #ffcc00;
      color: #000;
    }
  </style>
</head>

<body>
  <div class="tour-container">

    <a-scene id="scene" vr-mode-ui="enabled: true" loading-screen="enabled: false" renderer="antialias: true; colorManagement: true">

      <!-- ‚úÖ Activos -->
      <a-assets>
        <!-- üé• Videos -->
        <video id="video1" src="videos/video1.mp4" loop="true" crossorigin="anonymous" playsinline webkit-playsinline></video>
        <video id="video2" src="videos/video2.mp4" loop="true" crossorigin="anonymous" playsinline webkit-playsinline></video>
        <video id="video3" src="videos/video3.mp4" loop="true" crossorigin="anonymous" playsinline webkit-playsinline></video>

        <!-- üñº Im√°genes -->
        <img id="camara-img" src="img/Camara.png" />
        <img id="info-img" src="img/info.png" />
        <img id="play-img" src="img/play.jpg" />
        <img id="pause-img" src="img/pause.png" />
        <img id="cerrar-img" src="img/cerra.jpg" />
        <img id="next-img" src="img/next.jpg" />
        <img id="close-img" src="img/close.png" />
        <img id="logo-img" src="img/logo.png" />
      </a-assets>

      <!-- ‚úÖ Video principal 360 -->
      <a-videosphere id="sphere" src="#video1" rotation="0 0 0"></a-videosphere>

      <!-- ‚úÖ Contenedor de hotspots -->
      <a-entity id="hotspot-container"></a-entity>

      <!-- ‚úÖ Tarjeta info -->
      <a-plane id="info-panel-vr" visible="false" width="1.6" height="0.7" color="#0a1e2b" opacity="0.95" position="0 1.6 -1.5" look-at="[camera]">
        <a-text id="info-title-vr" value="T√≠tulo" align="center" position="0 0.20 0.01" color="#ffcc00" width="1.5"></a-text>
        <a-text id="info-desc-vr" value="Descripci√≥n..." align="center" position="0 -0.05 0.01" color="#ffffff" width="1.45"></a-text>
        <a-image id="info-close" src="#close-img" position="0.72 0.27 0.01" width="0.12" height="0.12" class="clickable"></a-image>
      </a-plane>

      <!-- ‚úÖ Logo VR -->
      <a-plane id="logo-panel" width="1" height="0.32" position="0 2.45 -1.9" color="#071826" opacity="0.95" look-at="[camera]">
        <a-image src="#logo-img" position="-0.38 0 0.01" width="0.26" height="0.26"></a-image>
        <a-text value="Guatap√© Travel" align="left" color="#ffcc00" position="-0.02 0.08 0.01" width="0.9"></a-text>
        <a-text value="The Medell√≠n Adventure" align="left" color="#fff" position="-0.02 -0.06 0.01" width="0.9"></a-text>
      </a-plane>

      <!-- ‚úÖ Bot√≥n salir VR -->
      <a-box id="exit-vr-btn" class="clickable" position="0 2 -1.2" depth="0.05" height="0.22" width="1.5" color="#ffcc00">
        <a-text value="Salir VR" align="center" color="#000" position="0 0 0.03"></a-text>
      </a-box>

      <!-- ‚úÖ Men√∫ de cambio de escenas (visible dentro del mundo VR) -->
      <a-plane id="menu-vr" position="-1.5 1.4 -2" width="1.4" height="1" color="#0a1e2b" opacity="0.9" look-at="[camera]">
        <a-text value="Escenas:" color="#ffcc00" position="-0.6 0.35 0.02" width="1.5"></a-text>

        <a-plane id="btn-scene1" position="0 0.15 0.02" width="1.2" height="0.25" color="#071826" class="clickable">
          <a-text value="Escena 1 - Guatap√©" align="center" width="1.1" color="#fff"></a-text>
        </a-plane>

        <a-plane id="btn-scene2" position="0 -0.15 0.02" width="1.2" height="0.25" color="#071826" class="clickable">
          <a-text value="Escena 2 - Piedra del Pe√±ol" align="center" width="1.1" color="#fff"></a-text>
        </a-plane>

        <a-plane id="btn-scene3" position="0 -0.45 0.02" width="1.2" height="0.25" color="#071826" class="clickable">
          <a-text value="Escena 3 - Malec√≥n" align="center" width="1.1" color="#fff"></a-text>
        </a-plane>
      </a-plane>

      <!-- ‚úÖ C√°mara -->
      <a-entity camera look-controls position="0 1.6 0"></a-entity>
      <a-entity id="cursor" cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
      <a-entity laser-controls="hand: left" raycaster="objects:.clickable"></a-entity>
      <a-entity laser-controls="hand: right" raycaster="objects:.clickable"></a-entity>
    </a-scene>
  </div>

  <script>
    // --- üé¨ Control de cambio de escenas ---
    const videos = {
      scene1: document.querySelector("#video1"),
      scene2: document.querySelector("#video2"),
      scene3: document.querySelector("#video3"),
    };

    const sphere = document.querySelector("#sphere");

    function switchScene(video) {
      // Pausa todos los videos
      Object.values(videos).forEach(v => v.pause());
      // Cambia fuente del video esf√©rico
      sphere.setAttribute("src", "#" + video.id);
      // Reproduce el video actual
      video.play();
    }

    // Asignar eventos
    document.querySelector("#btn-scene1").addEventListener("click", () => switchScene(videos.scene1));
    document.querySelector("#btn-scene2").addEventListener("click", () => switchScene(videos.scene2));
    document.querySelector("#btn-scene3").addEventListener("click", () => switchScene(videos.scene3));

    // --- üéß Salir de VR ---
    document.querySelector("#exit-vr-btn").addEventListener("click", () => {
      document.querySelector("a-scene").exitVR();
    });

    // --- üîä Reproducci√≥n autom√°tica del primer video ---
    window.addEventListener("load", () => {
      videos.scene1.play().catch(() => {
        console.log("El video esperar√° interacci√≥n del usuario.");
      });
    });
  </script>
</body>
</html>
